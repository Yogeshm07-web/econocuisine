<!-- app/views/products/index.html.erb -->

<h1>Products</h1>

<table class="table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Category</th>
      <th>Price</th>
      <th>Stock</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.name %></td>
        <td><%= product.description %></td>
        <td><%= product.category %></td>
        <td><%= number_to_currency(product.price / 100.0) %></td>
        <td><%= product.stock %></td>
        <td>
          <%= form_with(model: product, url: add_to_basket_path(product_id: product.id), method: :post, local: true) do |form| %>
            <%= form.hidden_field :product_id, value: product.id %>
            <div class="field">
              <%= form.label :quantity_and_unit %>
              <%= form.text_field :quantity_and_unit, class: "form-control" %>
            </div>
            <%= form.submit "Add to Basket", class: "btn btn-primary" %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
