<style>
  .products-list {
    list-style: none;
    padding: 0;
    margin-top: 20px;
  }

  .product {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    margin-bottom: 20px;
    background-color: #fff;
  }

  .product h2 {
    font-size: 18px;
    margin-bottom: 10px;
  }

  .product p {
    font-size: 14px;
    margin-bottom: 5px;
  }

  .product img {
    width: 100%;
    max-height: 200px;
    object-fit: cover;
    border-radius: 5px;
    margin-bottom: 10px;
  }

  .product form {
    margin-top: 10px;
  }

  .product input[type="text"] {
    width: 100px;
  }

  .product .btn-primary {
    margin-top: 10px;
  }
</style>

<h1>Le Wagon Super Market</h1>

<ul class="products-list">
  <% @products.each do |product| %>
    <li class="product">
      <%= image_tag product.image if product.image.attached? %>
      <h2><%= product.name %></h2>
      <p><%= product.description %></p>
      <p>Price: <%= number_to_currency(product.price) %></p>
      <%= form_with(model: product, url: add_to_basket_path(product_id: product.id), method: :post, local: true) do |form| %>
        <%= form.hidden_field :product_id, value: product.id %>
        <div class="field">
          <%= form.label :quantity_bought %>
          <%= form.text_field :quantity_bought, class: "form-control" %>
        </div>
        <%= form.submit "Add to Basket", class: "btn btn-primary" %>
      <% end %>
    </li>
  <% end %>
</ul>
